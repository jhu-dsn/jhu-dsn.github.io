===== Results =====

These graphs compare the SpamAssassin score generated by local_scan ('local score') and the one recovered from Yair marked and un-marked spam inbox files ('real score'). The plot is from February 28 until April 18. The first two graphs show the absolute value for both scores, while the last two plot the difference between the two values. We can see how the scores of //unmarked// messages become more close after March 26 (around email 900), when we switched from global to user-based SpamAssassin score. Later on, we introduced a another modification in local_scan script, to specify exactly what username should be used for each address (as opposed to extracting it automatically from the recipient). 

===== Graphs =====

{{score.comparison.unmarked.8.png?450|Unmarked}}{{score.comparison.marked.8.png?450|Marked}}
{{score.comparison.diff.unmarked.8.png?450|Unmarked difference}}{{score.comparison.diff.marked.8.png?450|Unmarked difference}}

===== Howto =====

  * Generate new smtp_path file
<code>
[ralucam@commedia trunk]$ time ./smtp_path.py /storage/projects/spamproject/snapshot.8/messages.log > smtp_path.8
real    5m9.276s
user    4m54.044s
sys     0m7.292s
</code>
  * Generate data for unmarked file:
<code>
[ralucam@cloud10 trunk]$ time ./score_comparison.py yair_spam_unmarked local.log > score_comparison.unmarked.data.8
real    0m21.401s
user    0m18.953s
sys     0m0.234s
</code>

  * Generate data for marked file:
<code>
[ralucam@cloud10 trunk]$ time ./score_comparison.py yair_spam_marked local.log > score_comparison.marked.data.8
real    1m27.049s
user    1m26.382s
sys     0m0.450s
</code>
  * Each file is this long:
<code>
[ralucam@cloud10 trunk]$ cat score_comparison.unmarked.data.8 | wc -l
1660
[ralucam@cloud10 trunk]$ cat score_comparison.marked.data.8 | wc -l
16765
</code>
  * Generate the graphs:
<code>
gnuplot score_comparison.gnuplot
</code>
